{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-12T06:34:20.775Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 4,
    "implemented": 4,
    "items": [
      {
        "id": "REQ-1",
        "summary": "Implement a complete fake premium subscription flow that persists premium status locally and updates UI state across the app.\n\nScope:\n- Make the existing Premium entry point(s) navigable from both the side drawer “Premium” item and the Profile page button.\n- Update the Go Premium page UI/content to match:\n  - Benefits list exactly: \"No ads • Unlimited premium stories • Exclusive content • Daily exclusive story\".\n  - Pricing placeholders exactly: \"Monthly ₹99\" and \"Yearly ₹799\" (no real payments).\n  - \"Subscribe Now\" action that shows a dedicated success screen: \"Subscribed successfully! Enjoy premium features.\".\n- Persist premium state using existing user state persistence (guest localStorage and authenticated backend AppUser via useAppUser.updateUserState), using the existing `isPremium` field.\n- When premium is active:\n  - Show a crown icon or “Premium” badge next to the username in the side drawer and in the Profile page.\n  - Hide ad UI anywhere ads are rendered (continue to rely on the existing isPremium checks, and ensure any remaining ad banners are gated).\n  - Treat premium-only stories as unlocked: if a story is flagged/treated as premium-only in the UI, show a clear placeholder message like \"Premium unlocked\" instead of any lock UI.\n- Add a \"Cancel Subscription\" action in Profile that reverts the user to free (sets isPremium to false) and updates the badge/crown and ad visibility immediately.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/hooks/useAppUser.ts",
          "frontend/src/pages/GoPremium.tsx",
          "frontend/src/pages/PremiumSuccess.tsx",
          "frontend/src/App.tsx",
          "frontend/src/components/AppDrawer.tsx",
          "frontend/src/pages/ProfileTab.tsx",
          "frontend/src/components/AdPlaceholder.tsx",
          "frontend/src/components/StoryCard.tsx"
        ],
        "matchedFiles": [
          "frontend/src/hooks/useAppUser.ts",
          "frontend/src/pages/GoPremium.tsx",
          "frontend/src/pages/PremiumSuccess.tsx",
          "frontend/src/App.tsx",
          "frontend/src/components/AppDrawer.tsx",
          "frontend/src/pages/ProfileTab.tsx",
          "frontend/src/components/AdPlaceholder.tsx",
          "frontend/src/components/StoryCard.tsx"
        ]
      },
      {
        "id": "REQ-2",
        "summary": "Add in-app sharing for both the overall app and individual stories with Web Share API support and a copy-link fallback.\n\nScope:\n- Add a \"Invite Friends – Share App\" button to the Profile page (near the bottom) or Home top area.\n  - On tap, use `navigator.share` when available with message:\n    \"Check out Global Tales Universe – Free multi-language stories app for adults & kids! Install here: [current app URL]\"\n    where [current app URL] is the runtime URL derived from the current window location.\n  - If `navigator.share` is not supported or fails, show a clear \"Copy link\" fallback that copies the app URL to clipboard and shows a confirmation toast.\n- For individual stories, enhance the existing share control on the StoryReader screen (currently uses ShareSheetPlaceholder) so that the share payload includes:\n  - story title\n  - a short preview (use the story summary if available; otherwise a safe truncated snippet)\n  - a link to the story page if stable, otherwise fall back to the app URL\n- Ensure the story share action works with apps like WhatsApp/Instagram via the system share dialog where supported.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/lib/share.ts",
          "frontend/src/pages/ProfileTab.tsx",
          "frontend/src/components/ShareSheetPlaceholder.tsx",
          "frontend/src/pages/StoryReader.tsx"
        ],
        "matchedFiles": [
          "frontend/src/lib/share.ts",
          "frontend/src/pages/ProfileTab.tsx",
          "frontend/src/components/ShareSheetPlaceholder.tsx",
          "frontend/src/pages/StoryReader.tsx"
        ]
      },
      {
        "id": "REQ-3",
        "summary": "Implement basic daily notifications / push alert simulation using the browser Notifications API with a Profile toggle and a test notification.\n\nScope:\n- Add a user-facing permission prompt either:\n  - on first app open, or\n  - in Profile as an explicit CTA\n  with the exact prompt text: \"Allow notifications for daily new stories?\".\n- Add a Profile setting toggle labeled exactly: \"Enable Daily Story Notifications\" (on/off).\n- When the user enables notifications:\n  - Request notification permission (if not already granted/denied).\n  - If permission is granted, immediately show a sample notification:\n    Title/body (single notification) must include the exact message:\n    \"New story added! Open app to read today's motivational tale.\"\n  - Persist the toggle state locally (guest localStorage and authenticated user state via useAppUser.updateUserState), and rehydrate it on reload.\n- If browser notifications are not supported or permission is denied:\n  - Keep the toggle in an off/disabled state with a clear inline explanation.\n  - Also show an in-app simulation on Home: a dismissible banner or badge reading exactly \"New story today!\" when notifications are enabled but real notifications cannot be shown.\n- Ensure service worker registration remains intact (do not break existing /sw.js registration).",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/hooks/useAppUser.ts",
          "frontend/src/lib/notifications.ts",
          "frontend/src/pages/ProfileTab.tsx",
          "frontend/src/components/DailyStoryNotificationBanner.tsx",
          "frontend/src/pages/HomeTab.tsx",
          "frontend/public/sw.js"
        ],
        "matchedFiles": [
          "frontend/src/hooks/useAppUser.ts",
          "frontend/src/lib/notifications.ts",
          "frontend/src/pages/ProfileTab.tsx",
          "frontend/src/components/DailyStoryNotificationBanner.tsx",
          "frontend/src/pages/HomeTab.tsx"
        ]
      },
      {
        "id": "REQ-4",
        "summary": "Maintain a clean, dark-themed, intuitive UI across the new Premium, Share, and Notifications controls.\n\nScope:\n- Keep the existing dark theme tokens/styles.\n- Ensure new buttons/toggles/success screens match existing spacing, typography, and component styles (use existing shadcn Button/Badge/Separator patterns).\n- Ensure new flows are testable in preview end-to-end: Premium subscribe/cancel, app share/story share (or copy link), notification permission + test notification.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/index.css",
          "frontend/src/pages/GoPremium.tsx",
          "frontend/src/pages/ProfileTab.tsx",
          "frontend/src/pages/HomeTab.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/GoPremium.tsx",
          "frontend/src/pages/ProfileTab.tsx",
          "frontend/src/pages/HomeTab.tsx"
        ]
      }
    ]
  },
  "changedFiles": [
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/App.tsx",
    "frontend/src/components/AdPlaceholder.tsx",
    "frontend/src/components/AppDrawer.tsx",
    "frontend/src/components/DailyStoryNotificationBanner.tsx",
    "frontend/src/components/ShareSheetPlaceholder.tsx",
    "frontend/src/components/StoryCard.tsx",
    "frontend/src/hooks/useAppUser.ts",
    "frontend/src/lib/notifications.ts",
    "frontend/src/lib/share.ts",
    "frontend/src/pages/GoPremium.tsx",
    "frontend/src/pages/HomeTab.tsx",
    "frontend/src/pages/PremiumSuccess.tsx",
    "frontend/src/pages/ProfileTab.tsx",
    "frontend/src/pages/StoryReader.tsx",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}